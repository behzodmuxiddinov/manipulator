import{r as u,g as S,u as y,j as e,B as d,R as L,L as w,a as T,C as E,s as R}from"./index-miM_W8Zb.js";import{u as C,T as c,A,L as W}from"./index.esm-BYthEER_.js";import{T as m}from"./TextField-CZ5LLs1m.js";const F=()=>{const[t,a]=u.useState(!1),[o,s]=u.useState(null),{register:n,handleSubmit:x,formState:{errors:r}}=C(),i=S("users",!0),g=y(),{HOME:h,REGISTER:p}=L,f=j=>{const{username:b,password:v}=j;a(!0),i&&i.find(l=>l.username===b&&l.password===v)?(R("isLogged","true"),g(h)):s("Пользователь не найден"),a(!1)};return e.jsx(d,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:e.jsxs(d,{component:"form",onSubmit:x(f),sx:{display:"flex",flexDirection:"column",gap:2,width:360,p:4,bgcolor:"white",boxShadow:3,borderRadius:2},children:[e.jsx(c,{variant:"h5",textAlign:"center",fontWeight:"bold",children:"Авторизоваться"}),o&&e.jsx(A,{severity:"error",children:o}),e.jsx(m,{label:"Имя пользователя",variant:"outlined",...n("username",{required:"Требуется имя пользователя"}),error:!!r.username,helperText:r.username?.message,fullWidth:!0,onChange:()=>s("")}),e.jsx(m,{label:"Пароль",type:"password",variant:"outlined",...n("password",{required:"Требуется пароль",minLength:{value:4,message:"Минимум 4 символа"}}),error:!!r.password,helperText:r.password?.message,fullWidth:!0,onChange:()=>s("")}),e.jsxs(c,{variant:"body2",textAlign:"center",sx:{mt:1},children:["Нет аккаунта?"," ",e.jsx(W,{component:w,to:p,underline:"hover",children:"Зарегистрироваться"})]}),e.jsx(T,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,disabled:t,sx:{mt:1},children:t?e.jsx(E,{size:24,color:"inherit"}):"Вход"})]})})};export{F as default};
