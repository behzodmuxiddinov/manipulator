import{u as v,r as c,g as y,j as e,B as m,a as S,C as L,L as T,b as P,c as E,s as R,R as W}from"./index-miM_W8Zb.js";import{u as A,T as p,A as q,L as B}from"./index.esm-BYthEER_.js";import{T as o}from"./TextField-CZ5LLs1m.js";function H(){const x=v(),[n,i]=c.useState(null),[l,d]=c.useState(!1),{HOME:g}=W,h=y("users",!0),{register:t,handleSubmit:f,watch:w,formState:{errors:r}}=A(),b=w("password",""),j=async a=>{const{confirmPassword:C,...s}=a;if(h.find(u=>u.username===s.username&&u.password===s.password)){i("Пользователь уже существует");return}else i(null),d(!0),P(s),E(s),d(!1),R("isLogged","true"),x(g)};return e.jsx(m,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:e.jsxs(m,{component:"form",onSubmit:f(j),sx:{display:"flex",flexDirection:"column",gap:2,width:360,p:4,bgcolor:"white",boxShadow:3,borderRadius:2},children:[e.jsx(p,{variant:"h5",textAlign:"center",fontWeight:"bold",children:"Регистрация"}),n&&e.jsx(q,{severity:"error",children:n}),e.jsx(o,{label:"Имя пользователя",variant:"outlined",...t("username",{required:"Имя пользователя обязательно"}),error:!!r.username,helperText:r.username?.message,fullWidth:!0}),e.jsx(o,{label:"Пароль",type:"password",variant:"outlined",...t("password",{required:"Пароль обязателен",minLength:{value:4,message:"Минимум 4 символа"}}),error:!!r.password,helperText:r.password?.message,fullWidth:!0}),e.jsx(o,{label:"Подтвердите пароль",type:"password",variant:"outlined",...t("confirmPassword",{required:"Подтвердите пароль",validate:a=>a===b||"Пароли не совпадают"}),error:!!r.confirmPassword,helperText:r.confirmPassword?.message,fullWidth:!0}),e.jsx(S,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,disabled:l,sx:{mt:1},children:l?e.jsx(L,{size:24,color:"inherit"}):"Зарегистрироваться"}),e.jsxs(p,{variant:"body2",textAlign:"center",sx:{mt:1},children:["Уже есть аккаунт?"," ",e.jsx(B,{component:T,to:"/",underline:"hover",children:"Войти"})]})]})})}export{H as default};
